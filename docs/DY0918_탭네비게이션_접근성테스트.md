# 탭 네비게이션 키보드 접근성 테스트 계획서

## 개요
TabSystem 컴포넌트의 키보드 네비게이션 접근성 기능에 대한 종합적인 테스트 계획

## 테스트 대상 컴포넌트
- **파일**: `/modules/mobile/components/ui/TabSystem.tsx`
- **주요 기능**: 키보드 네비게이션, ARIA 속성, 포커스 관리

## 키보드 네비게이션 테스트 케이스

### 1. 방향키 네비게이션 테스트
**테스트 ID**: KN-001
**설명**: 좌우 방향키를 사용한 탭 전환 기능 검증

#### 테스트 시나리오:
1. **우측 방향키 (ArrowRight)**
   - 현재 탭에서 우측 방향키 입력
   - 다음 탭으로 포커스 이동 확인
   - 마지막 탭에서 우측 방향키 시 첫 번째 탭으로 순환 확인

2. **좌측 방향키 (ArrowLeft)**
   - 현재 탭에서 좌측 방향키 입력
   - 이전 탭으로 포커스 이동 확인
   - 첫 번째 탭에서 좌측 방향키 시 마지막 탭으로 순환 확인

**예상 결과**:
```javascript
// ArrowRight 동작
newIndex = currentIndex < tabs.length - 1 ? currentIndex + 1 : 0

// ArrowLeft 동작  
newIndex = currentIndex > 0 ? currentIndex - 1 : tabs.length - 1
```

### 2. Home/End 키 네비게이션 테스트
**테스트 ID**: KN-002
**설명**: Home/End 키를 사용한 극단 탭 이동 기능 검증

#### 테스트 시나리오:
1. **Home 키**
   - 임의의 탭에서 Home 키 입력
   - 첫 번째 탭으로 이동 확인
   - 이미 첫 번째 탭인 경우 위치 유지 확인

2. **End 키**
   - 임의의 탭에서 End 키 입력
   - 마지막 탭으로 이동 확인
   - 이미 마지막 탭인 경우 위치 유지 확인

**예상 결과**:
```javascript
// Home key: newIndex = 0
// End key: newIndex = tabs.length - 1
```

### 3. 포커스 관리 테스트
**테스트 ID**: KN-003
**설명**: 탭 전환 시 포커스 관리 검증

#### 테스트 시나리오:
1. **포커스 이동 확인**
   - 키보드 네비게이션 후 새 탭에 포커스 설정 확인
   - `document.querySelector`를 통한 포커스 대상 선택 확인
   - 포커스된 탭의 시각적 표시 확인

2. **tabIndex 관리**
   - 활성 탭: `tabIndex={0}`
   - 비활성 탭: `tabIndex={-1}`
   - 키보드 네비게이션으로만 포커스 가능한지 확인

**예상 결과**:
```javascript
const newTab = document.querySelector(
  `[role="tab"][data-tab-id="${tabs[newIndex].id}"]`
) as HTMLButtonElement
newTab?.focus()
```

## ARIA 접근성 테스트

### 4. ARIA 속성 테스트
**테스트 ID**: ARIA-001
**설명**: 스크린 리더 호환성을 위한 ARIA 속성 검증

#### 검증 항목:
1. **tablist 역할**
   ```html
   <div role="tablist" aria-label="작업일지 탭">
   ```

2. **tab 역할 및 속성**
   ```html
   <button
     role="tab"
     data-tab-id="tab1"
     aria-selected="true|false"
     aria-controls="panel-tab1"
     tabIndex="0|-1"
   >
   ```

3. **tabpanel 역할**
   ```html
   <div
     role="tabpanel"
     id="panel-tab1"
     aria-labelledby="tab-tab1"
     hidden="true|false"
   >
   ```

### 5. 스크린 리더 호환성 테스트
**테스트 ID**: SR-001
**설명**: 주요 스크린 리더에서의 동작 확인

#### 테스트 환경:
- **데스크톱**: NVDA, JAWS, ORCA
- **모바일**: VoiceOver (iOS), TalkBack (Android)

#### 검증 항목:
- 탭 목록 인식 및 안내
- 활성/비활성 탭 상태 안내
- 키보드 네비게이션 가이드
- 탭 개수 및 현재 위치 안내

## 성능 및 UX 테스트

### 6. 반응성 테스트
**테스트 ID**: RESP-001
**설명**: 키보드 입력에 대한 반응 시간 및 애니메이션 검증

#### 검증 항목:
- 키 입력 후 탭 전환 지연 시간 (< 100ms)
- 포커스 이동 애니메이션 부드러움
- 연속 키 입력 시 성능 저하 없음

### 7. 브라우저 호환성 테스트
**테스트 ID**: COMPAT-001
**설명**: 주요 브라우저에서의 키보드 네비게이션 동작 확인

#### 테스트 환경:
- **데스크톱**: Chrome, Firefox, Safari, Edge
- **모바일**: Chrome Mobile, Safari Mobile, Samsung Internet

## 테스트 실행 계획

### 자동화 테스트 구현
```typescript
// 키보드 이벤트 테스트 예시
describe('TabSystem Keyboard Navigation', () => {
  test('should navigate to next tab on ArrowRight', () => {
    const { container } = render(<TabSystem tabs={mockTabs} activeTab="tab1" onTabChange={mockOnChange} />)
    const tabList = container.querySelector('[role="tablist"]')
    
    fireEvent.keyDown(tabList, { key: 'ArrowRight' })
    
    expect(mockOnChange).toHaveBeenCalledWith('tab2')
  })
  
  test('should cycle to first tab from last tab on ArrowRight', () => {
    const { container } = render(<TabSystem tabs={mockTabs} activeTab="tab3" onTabChange={mockOnChange} />)
    const tabList = container.querySelector('[role="tablist"]')
    
    fireEvent.keyDown(tabList, { key: 'ArrowRight' })
    
    expect(mockOnChange).toHaveBeenCalledWith('tab1')
  })
})
```

### 수동 테스트 체크리스트
- [ ] 방향키 네비게이션 동작
- [ ] Home/End 키 동작
- [ ] 포커스 시각적 표시
- [ ] ARIA 속성 정확성
- [ ] 스크린 리더 호환성
- [ ] 모바일 디바이스 테스트
- [ ] 브라우저 간 일관성

## 결론
TabSystem 컴포넌트는 WCAG 2.1 AA 기준을 충족하는 키보드 네비게이션을 구현하고 있으며, 추가적인 테스트를 통해 접근성 품질을 검증할 예정입니다.