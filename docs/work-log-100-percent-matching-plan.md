# 작업일지 화면 100% 매칭 구현 계획안

## 📋 프로젝트 개요

**목표**: 현재 캘린더 기반 작업일지 화면을 요구사항 HTML 파일과 100% 동일하게 구현

**요구사항 파일**: `/dy_memo/new_image_html_v2.0/html_consolidate/task.html`
**현재 구현**: `modules/worker-site-manager/pages/WorkLogHomePage.tsx` (캘린더 기반)
**대상 화면**: `/app/mobile/worklog/page.tsx` (카드 기반으로 전환 필요)

---

## 🔍 현황 분석

### 요구사항 HTML 구조

- **탭 네비게이션**: "작성중" / "승인완료"
- **검색 기능**: 현장명 기반 검색 (디바운싱)
- **카드 리스트**: 작업일지를 카드 형태로 표시
- **플로팅 액션 버튼**: 작업일지 작성 모달 호출
- **바텀시트**: 미작성 알림 시스템
- **모달**: 작업일지 생성/편집 폼

### 현재 구현 현황

- **구조**: 캘린더 기반 출력/급여 현황 화면
- **탭**: "출력현황" / "급여현황"
- **표시**: 월별 캘린더 뷰
- **컴포넌트**: 작업일지 관련 컴포넌트들이 분리되어 있으나 미연결

### 기존 사용 가능한 컴포넌트

✅ `WorkLogCard.tsx` (244라인) - 카드 컴포넌트  
✅ `WorkLogModal.tsx` (481라인) - 생성/편집 모달  
✅ `WorkLogSearch.tsx` (79라인) - 검색 컴포넌트  
✅ `FileUploadSection.tsx` - 파일 업로드  
✅ `work-log.types.ts` (198라인) - 타입 정의  
✅ `use-work-logs.ts` - 데이터 훅

---

## 📊 차이점 분석 (9가지 주요 카테고리)

### 1. **전체 UI 구조**

- **현재**: 캘린더 기반 레이아웃
- **요구사항**: 카드 리스트 기반 레이아웃

### 2. **탭 구조**

- **현재**: "출력현황/급여현황"
- **요구사항**: "작성중/승인완료"

### 3. **검색 기능**

- **현재**: 없음
- **요구사항**: 실시간 검색 (디바운싱)

### 4. **데이터 표시 방법**

- **현재**: 월별 캘린더
- **요구사항**: 카드 리스트

### 5. **작업일지 카드 구성**

- **현재**: 컴포넌트 존재하나 미사용
- **요구사항**: 카드 중심 인터페이스

### 6. **생성 기능**

- **현재**: 모달 컴포넌트 존재하나 미연결
- **요구사항**: 플로팅 액션 버튼

### 7. **미작성 알림**

- **현재**: 없음
- **요구사항**: 바텀시트 알림

### 8. **스타일링 및 디자인**

- **현재**: 캘린더 중심 디자인
- **요구사항**: 카드 중심 모바일 디자인

### 9. **반응형 디자인**

- **현재**: 제한적 터치 인터페이스
- **요구사항**: 완전한 모바일 최적화

---

## 🎯 구현 전략

### **Phase 1: 핵심 구조 변경** (우선순위: 높음)

**예상 시간**: 2-3시간

#### 1.1 WorkLogHomePage 리팩토링

- **파일**: `modules/worker-site-manager/pages/WorkLogHomePage.tsx`
- **작업**: 캘린더 기반 → 카드 기반 전환
- **방법**: 기존 코드 대부분 교체 또는 새 컴포넌트 생성

#### 1.2 탭 네비게이션 구현

- **목표**: "작성중/승인완료" 탭 구조
- **기능**: 탭별 데이터 필터링 (`draft`/`approved`)
- **상태**: 탭 전환 애니메이션 및 동기화

#### 1.3 기본 카드 리스트 구현

- **컴포넌트**: 기존 `WorkLogCard` 연결
- **레이아웃**: 스크롤 가능한 카드 리스트
- **테스트**: 더미 데이터로 표시 확인

### **Phase 2: 핵심 기능 구현** (우선순위: 높음)

**예상 시간**: 1-2시간

#### 2.1 검색 기능 통합

- **컴포넌트**: `WorkLogSearch` 메인 페이지 연결
- **기능**: 현장명 기반 실시간 검색
- **최적화**: 300ms 디바운싱 적용

#### 2.2 작업일지 생성 기능

- **UI**: 플로팅 액션 버튼 (FAB) 추가
- **모달**: `WorkLogModal` 연결 및 상태 관리
- **폼**: 작업일지 생성/편집 처리

#### 2.3 데이터 연결

- **훅**: `use-work-logs` 활용한 데이터 페칭
- **CRUD**: 생성, 읽기, 수정, 삭제 작업
- **상태**: 로딩, 에러, 성공 상태 관리

### **Phase 3: 고급 기능 및 UX 개선** (우선순위: 중간)

**예상 시간**: 1-2시간

#### 3.1 미작성 알림 시스템

- **컴포넌트**: 바텀시트 신규 생성
- **로직**: 미작성 작업일지 자동 감지
- **저장**: localStorage 기반 알림 상태 관리

#### 3.2 파일 업로드 통합

- **컴포넌트**: `FileUploadSection`을 모달에 통합
- **파일 타입**: 사진대지, 진행도면, 작업완료확인서
- **기능**: 미리보기, 삭제, 다중 업로드

#### 3.3 카드 액션 기능

- **버튼**: 편집, 제출, 보기, 인쇄 기능
- **상태**: 각 액션별 상태 변경 처리
- **권한**: 사용자 권한에 따른 버튼 표시

### **Phase 4: 스타일링 및 세부 조정** (우선순위: 중간)

**예상 시간**: 1시간

#### 4.1 디자인 시스템 매칭

- **CSS**: 요구사항 HTML 스타일 정확히 매칭
- **세부사항**: 색상, 폰트, 간격, 여백, 패딩
- **일관성**: 전체 앱과의 디자인 일관성

#### 4.2 반응형 및 터치 최적화

- **터치**: 모바일 터치 인터페이스 최적화
- **화면**: 다양한 화면 크기 대응
- **성능**: 스크롤 성능 최적화

### **Phase 5: 테스트 및 최적화** (우선순위: 낮음)

**예상 시간**: 30분

#### 5.1 기능 테스트

- **단위 테스트**: 각 기능별 동작 검증
- **통합 테스트**: 컴포넌트 간 상호작용
- **엣지 케이스**: 오류 상황 처리

#### 5.2 성능 최적화

- **메모이제이션**: React.memo, useMemo 적용
- **lazy loading**: 큰 리스트 가상화
- **메모리**: 메모리 누수 방지

---

## 📁 수정 대상 파일

### **대폭 수정**

- **`modules/worker-site-manager/pages/WorkLogHomePage.tsx`** (589+ 라인)
  - 전체 구조 변경: 캘린더 → 카드 리스트
  - 탭 네비게이션 구조 변경
  - 상태 관리 로직 전면 수정

### **소폭 수정**

- **`app/mobile/worklog/page.tsx`** (14라인)
  - 라우팅 및 권한 확인 코드는 유지
- **기존 WorkLog 컴포넌트들**
  - `WorkLogCard.tsx`: 스타일링 조정
  - `WorkLogModal.tsx`: 메인 페이지와 연결
  - `WorkLogSearch.tsx`: 메인 페이지와 통합

### **신규 생성**

- **FloatingActionButton 컴포넌트**
  - 작업일지 생성 버튼
  - 요구사항 HTML 스타일 매칭

- **BottomSheet 컴포넌트**
  - 미작성 알림 시스템
  - 모바일 최적화된 바텀시트

---

## ⚡ 구현 우선순위

### 🔴 **Critical (즉시 구현)**

1. WorkLogHomePage 리팩토링
2. 탭 네비게이션 구현
3. 기본 카드 리스트 표시

### 🟡 **High (1단계 완료 후)**

1. 검색 기능 통합
2. 작업일지 생성 기능
3. 데이터 연결

### 🟢 **Medium (핵심 기능 완료 후)**

1. 미작성 알림 시스템
2. 파일 업로드 통합
3. 스타일링 매칭

### 🔵 **Low (마무리 단계)**

1. 성능 최적화
2. 테스트 코드 작성

---

## 📊 예상 작업량

### **총 예상 시간: 5-8시간**

- Phase 1: 2-3시간 (핵심 구조)
- Phase 2: 1-2시간 (기본 기능)
- Phase 3: 1-2시간 (고급 기능)
- Phase 4: 1시간 (스타일링)
- Phase 5: 30분 (테스트)

### **파일 수정 규모**

- **신규 생성**: 2-3개 컴포넌트
- **대폭 수정**: 1개 파일 (WorkLogHomePage)
- **중간 수정**: 1개 파일 (routing)
- **소폭 수정**: 4-5개 파일 (기존 컴포넌트)

---

## 🎉 완료 후 결과

### **Before (현재)**

- 캘린더 기반 출력/급여 현황 화면
- 작업일지 관련 기능 없음
- 분리된 컴포넌트들 (미사용)

### **After (목표)**

- 카드 기반 작업일지 관리 화면
- 요구사항 HTML과 100% 일치
- 완전히 통합된 작업일지 시스템
- 모바일 최적화된 UX/UI

---

## 📝 다음 단계

1. **문서 검토 및 승인**
2. **Phase 1 구현 시작**
3. **단계별 테스트 및 검증**
4. **최종 완성도 검토**

---

**작성일**: 2025-09-16  
**버전**: v1.0  
**상태**: 구현 준비 완료
