# INOPNC 워크플로우 관리 시스템 - 현재 구현 기능 (역할별)

## 📋 개요

이 문서는 INOPNC 워크플로우 관리 시스템에서 현재 구현되어 있는 화면과 기능들을 사용자 역할별로 정리한 문서입니다.

**시스템 구조**: Next.js 14 + Supabase + TypeScript  
**인증 시스템**: Supabase Auth  
**데이터베이스**: PostgreSQL (Supabase)  
**UI 라이브러리**: Tailwind CSS + Custom UI Components

---

## 🎯 사용자 역할 구분

### 1. 👷 작업자 (Worker)

- **권한 레벨**: 기본 사용자
- **주요 업무**: 현장 작업 수행, 출석 관리, 작업일지 작성

### 2. 👨‍💼 현장관리자 (Site Manager)

- **권한 레벨**: 현장별 관리자
- **주요 업무**: 현장 운영 관리, 작업자 관리, 현장 보고서 관리

### 3. 🏢 시공업체 (Customer Manager)

- **권한 레벨**: 고객사 담당자
- **주요 업무**: 프로젝트 모니터링, 진행 상황 확인

### 4. 👩‍💻 본사 관리자 (Admin)

- **권한 레벨**: 전사 관리자
- **주요 업무**: 전체 시스템 관리, 사용자 관리, 현장 관리

### 5. 🔧 시스템 관리자 (System Admin)

- **권한 레벨**: 최고 관리자
- **주요 업무**: 시스템 설정, 권한 관리, 시스템 모니터링

---

## 🏠 공통 기능 (모든 역할)

### 📱 메인 대시보드

- **경로**: `/dashboard`
- **기능**:
  - 개인 정보 표시 (이름, 이메일, 역할)
  - 역할별 맞춤 대시보드 컨텐츠
  - 최근 활동 내역
  - 알림 센터

### 👤 내정보 관리

- **경로**: `/dashboard/profile`
- **기능**:
  - 개인정보 수정
  - 비밀번호 변경
  - 프로필 사진 관리
  - 알림 설정

### 🔐 인증 시스템

- **경로**: `/auth/login`, `/auth/signup`
- **기능**:
  - 로그인/로그아웃
  - 회원가입 (승인 대기 시스템)
  - 비밀번호 재설정

---

## 👷 작업자 (Worker) 전용 기능

### 📅 출석현황 관리

- **경로**: `/dashboard/attendance`
- **기능**:
  - 개인 출석 현황 조회
  - 월별/일별 출석 통계
  - 출석 캘린더 뷰

### 💰 급여정보 조회

- **경로**: `/dashboard/salary`
- **기능**:
  - 개인 급여 내역 조회
  - 급여명세서 다운로드
  - 근무시간 기반 급여 계산 내역

### 📝 작업일지 작성/조회

- **경로**: `/dashboard/daily-reports`
- **기능**:
  - 작업일지 작성
  - 작업일지 조회/수정
  - 현장별 작업 내역 기록

### 🗺️ 현장정보 조회

- **경로**: `/dashboard/site-info`
- **기능**:
  - 배정된 현장 정보 조회
  - 현장별 작업 지시사항 확인
  - NPC-1000 자재 요청 기능

### 📁 개인 문서함

- **경로**: `/dashboard#documents-unified`
- **기능**:
  - 개인 문서 업로드/관리
  - 공유 문서 열람
  - 필수 제출 문서 관리

---

## 👨‍💼 현장관리자 (Site Manager) 전용 기능

### 👷‍♀️ 작업자 관리 (추가 기능)

- **기능**:
  - 현장 배정 작업자 관리
  - 작업자 출석 현황 모니터링
  - 작업자별 작업일지 승인

### 📊 현장 운영 대시보드 (추가 기능)

- **기능**:
  - 현장별 작업 진행률 모니터링
  - 자재 사용량 관리
  - 현장 안전 관리 현황

---

## 🏢 시공업체 (Customer Manager) 전용 기능

### 📈 프로젝트 모니터링

- **기능**:
  - 진행 중인 프로젝트 현황 조회
  - 작업 진척도 모니터링
  - 품질 관리 현황 확인

### 📋 보고서 조회

- **기능**:
  - 현장별 작업 보고서 조회
  - 품질 검사 결과 조회
  - 진행률 리포트 다운로드

---

## 👩‍💻 본사 관리자 (Admin) 전용 기능

### 🏢 현장 관리

- **경로**: `/dashboard/admin/sites`
- **기능**:
  - 현장 등록/수정/삭제
  - 현장별 정보 관리 (주소, 담당자, 공정 정보)
  - 현장별 작업자 배정 관리
  - 현장별 시공업체 연결 관리
  - 현장별 작업일지 관리
  - 현장별 문서 관리

### 👥 사용자 관리

- **경로**: `/dashboard/admin/users`
- **기능**:
  - 사용자 등록/수정/삭제
  - 사용자 역할 관리
  - 사용자별 현장 배정
  - 회원가입 승인 관리
  - 사용자 상세 정보 관리

### 💼 급여 관리

- **경로**: `/dashboard/admin/salary`
- **기능**:
  - **출력일보 급여계산**: 일별 작업 기반 급여 자동 계산
  - **개인별 월급여계산**: 작업자별 월 단위 급여 정산
  - **급여명세서 생성 및 보관**: PDF 급여명세서 생성/다운로드
  - **개인별 급여기준 설정**: 작업자별 일당, 시급 설정
  - **급여 통계 대시보드**: 급여 현황 차트 및 통계

### 📦 NPC-1000 자재 관리

- **경로**: `/dashboard/admin/materials`
- **기능**:
  - **입고 관리**: 자재 입고 처리 및 기록
  - **재고 관리**: 실시간 재고 현황 모니터링
  - **출고 관리**: 현장별 자재 출고 처리
  - **출고 요청 처리**: 현장에서 요청한 자재 승인/처리

### 🖼️ 도면 마킹 관리

- **경로**: `/dashboard/admin/markup`
- **기능**:
  - 도면 업로드 및 관리
  - 도면 마킹/주석 기능
  - 마킹된 도면 버전 관리
  - 현장별 도면 배포 관리

### 📚 공유 문서함 관리

- **경로**: `/dashboard/admin/shared-documents`
- **기능**:
  - 전사 공유 문서 관리
  - 문서 권한 설정 (역할별 접근 권한)
  - 문서 카테고리 관리
  - 문서 버전 관리
  - 필수 제출 문서 유형 관리

### 📊 분석 및 리포트

- **경로**: `/dashboard/analytics`
- **기능**:
  - 전사 작업 현황 대시보드
  - 현장별 생산성 분석
  - 작업자별 성과 분석
  - 자재 사용량 분석
  - 급여 통계 리포트

### 🔍 성능 모니터링

- **경로**: `/dashboard/performance`
- **기능**:
  - 시스템 성능 모니터링
  - API 응답 시간 추적
  - 사용자 활동 로그 분석
  - 에러 발생 현황 모니터링

### 🏗️ 통합 관리 (EnhancedSiteView)

- **경로**: `/dashboard/admin/integrated`
- **기능**:
  - 현장-사용자-작업일지 통합 관리 뷰
  - 드래그 앤 드롭 사용자 배정
  - 실시간 작업 현황 모니터링
  - 통합 검색 및 필터링

---

## 🔧 시스템 관리자 (System Admin) 추가 기능

### ⚙️ 시스템 관리

- **경로**: `/dashboard/admin/system`
- **기능**:
  - 시스템 설정 관리
  - 사용자 권한 관리
  - 데이터베이스 백업/복원
  - 시스템 로그 관리
  - 성능 최적화 도구

### 📋 감사 로그

- **경로**: `/dashboard/admin/audit-logs`
- **기능**:
  - 사용자 활동 로그 조회
  - 시스템 변경 사항 추적
  - 보안 이벤트 모니터링
  - 로그 데이터 내보내기

### 🔔 알림 관리

- **경로**: `/dashboard/admin/notifications`
- **기능**:
  - 전사 알림 발송
  - 알림 템플릿 관리
  - 이메일 알림 설정
  - 알림 통계 및 분석

---

## 🛠️ 주요 기술 스택 및 구현 특징

### 🔐 인증 및 권한 관리

- **Supabase Auth** 기반 인증
- **RLS (Row Level Security)** 를 통한 데이터 보안
- **역할 기반 접근 제어 (RBAC)**
- **JWT 토큰** 기반 세션 관리

### 📱 반응형 UI/UX

- **Tailwind CSS** 기반 반응형 디자인
- **모바일 친화적** 사이드바 및 네비게이션
- **다크모드** 지원
- **접근성 (A11y)** 최적화

### 🔄 실시간 기능

- **Supabase Realtime** 을 통한 실시간 데이터 동기화
- **React Query** 기반 데이터 캐싱 및 상태 관리
- **낙관적 업데이트** 패턴 적용

### 📊 데이터 시각화

- **차트 라이브러리**를 통한 통계 시각화
- **대시보드 위젯** 시스템
- **Excel/PDF 내보내기** 기능

### 🗂️ 문서 관리 시스템

- **파일 업로드/다운로드**
- **문서 버전 관리**
- **권한 기반 문서 접근**
- **문서 미리보기** 기능

---

## 📝 추가 구현된 특수 기능

### 🧮 급여 계산 시스템

- **자동 급여 계산**: 작업시간 기반 자동 계산
- **연장근무 수당**: 8시간 초과 시 1.5배 적용
- **PDF 급여명세서**: 개인별 급여명세서 자동 생성
- **Excel 내보내기**: 급여 데이터 일괄 내보내기

### 📐 도면 마킹 도구

- **캔버스 기반 마킹**: HTML5 Canvas를 이용한 도면 주석
- **다양한 마킹 도구**: 선, 원, 텍스트, 화살표 등
- **마킹 데이터 저장**: JSON 형태로 마킹 정보 저장
- **버전 관리**: 마킹 버전별 관리

### 📦 재고 관리 시스템

- **실시간 재고 추적**: 입고/출고 실시간 반영
- **재고 알림**: 최소 재고량 기반 알림
- **재고 이동 추적**: 현장 간 재고 이동 관리
- **재고 보고서**: 일/월별 재고 현황 리포트

### 📋 작업일지 관리

- **다양한 입력 방식**: 작업자 선택 또는 직접 입력
- **현장별 자동 연동**: 현장 선택 시 관련 정보 자동 입력
- **승인 워크플로우**: 작업일지 승인 프로세스
- **PDF 내보내기**: 작업일지 PDF 변환

---

## 📈 성능 및 최적화 특징

### ⚡ 성능 최적화

- **코드 스플리팅**: 페이지별 번들 분할
- **이미지 최적화**: Next.js Image 컴포넌트 활용
- **캐싱 전략**: React Query를 통한 효율적 캐싱
- **로딩 상태 관리**: Skeleton UI 및 로딩 스피너

### 🔍 검색 및 필터링

- **통합 검색**: 전체 데이터 통합 검색 기능
- **고급 필터링**: 다중 조건 필터링
- **실시간 검색**: 타이핑 시 즉시 검색 결과 표시
- **검색 결과 하이라이팅**: 검색어 강조 표시

### 📱 모바일 최적화

- **터치 친화적 UI**: 모바일 터치 최적화
- **오프라인 지원**: 제한적 오프라인 기능
- **푸시 알림**: 브라우저 푸시 알림 지원
- **앱과 같은 경험**: PWA 기능 일부 적용

---

## 🔮 시스템 아키텍처 특징

### 🏗️ 확장 가능한 구조

- **모듈식 컴포넌트**: 재사용 가능한 UI 컴포넌트
- **타입 안정성**: TypeScript를 통한 타입 안정성
- **API 라우팅**: Next.js API Routes 활용
- **미들웨어**: 인증 및 권한 체크 미들웨어

### 🔒 보안 기능

- **CSRF 보호**: Next.js 기본 CSRF 보호
- **XSS 방지**: 입력 데이터 검증 및 이스케이프
- **SQL 인젝션 방지**: Supabase ORM을 통한 안전한 쿼리
- **권한별 데이터 접근**: RLS를 통한 데이터 레벨 보안

### 📊 모니터링 및 로깅

- **에러 추적**: 클라이언트/서버 에러 로깅
- **성능 모니터링**: API 응답 시간 추적
- **사용자 활동 로그**: 주요 사용자 행동 기록
- **시스템 상태 모니터링**: 실시간 시스템 상태 체크

---

_이 문서는 2025년 9월 10일 기준으로 작성되었으며, 시스템이 지속적으로 업데이트됨에 따라 내용이 변경될 수 있습니다._
