<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, viewport-fit=cover, maximum-scale=1.0, user-scalable=no">
    <title>회원가입 - INOPNC</title>
    <link rel="stylesheet" href="../ino.css">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+KR:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <style>
        /* 회원가입 페이지 전용 스타일 */
        body {
            margin: 0;
            padding: 0;
            background: #FFFFFF;
            font-family: 'Noto Sans KR', -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Roboto', 'Helvetica Neue', Arial, sans-serif;
        }

        .signup-container {
            min-height: 100vh;
            width: 100vw;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            padding: 0;
            margin: 0;
            background: #FFFFFF;
            box-sizing: border-box;
            overflow-x: hidden;
            overflow-y: auto;
            position: relative;
        }

        .signup-content {
            width: 100%;
            max-width: 400px;
            height: 749px;
            padding: 20px 18px;
            box-sizing: border-box;
            overflow: visible;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
        }

        .signup-header {
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 16px;
            margin: 0 auto 20px auto;
            width: 100%;
            text-align: center;
            vertical-align: middle;
            height: auto;
        }

        .signup-logo {
            height: 38px;
            width: auto;
            object-fit: contain;
            flex-shrink: 0;
            vertical-align: middle;
            display: flex;
            align-items: center;
        }

        .signup-title {
            font-size: 24px;
            font-weight: 600;
            color: #1A254F;
            margin: 0;
            line-height: 1.2;
            height: 38px;
            vertical-align: middle;
            display: flex;
            align-items: center;
        }

        .form-group {
            margin-bottom: 18px;
        }

        .form-input {
            width: 100%;
            height: 45px;
            padding: 0 20px;
            border: 1px solid #D1D5DB;
            border-radius: 8px;
            background: #FFFFFF;
            color: #6B7280;
            font-size: 16px;
            font-weight: 500;
            transition: all 0.2s ease;
            padding-right: 45px;
            box-sizing: border-box;
            font-family: "Noto Sans KR", system-ui, sans-serif;
        }

        .form-input:focus {
            outline: none;
            border-color: #31a3fa;
            box-shadow: 0 0 0 3px rgba(49, 163, 250, 0.1);
        }

        .form-input::placeholder {
            color: #6B7280;
        }

        /* 드롭다운 스타일 */
        .select-wrapper {
            position: relative;
            width: 100%;
        }

        .company-select {
            width: 100% !important;
            appearance: none;
            -webkit-appearance: none;
            -moz-appearance: none;
            background-image: none;
            padding-right: 24px;
            cursor: pointer;
            box-sizing: border-box;
        }

        .select-arrow {
            position: absolute;
            right: 14px;
            top: 50%;
            transform: translateY(-50%);
            pointer-events: none;
            width: 16px;
            height: 16px;
            color: #6B7280;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .select-arrow svg {
            width: 100%;
            height: 100%;
        }

        .company-select:focus + .select-arrow {
            color: #31a3fa;
        }

        .email-wrapper {
            display: flex;
            align-items: center;
            gap: 6px;
            height: 45px;
        }

        .email-username-wrapper {
            position: relative;
            flex: 1;
            min-width: 0;
        }

        .email-input {
            width: 100%;
            height: 45px;
            padding: 0 20px;
            min-width: 0;
            overflow: hidden;
            text-overflow: ellipsis;
            white-space: nowrap;
            box-sizing: border-box;
            display: flex;
            align-items: center;
            transition: all 0.2s ease;
        }

        .email-input:hover {
            border-color: #31a3fa;
        }

        .email-input:focus {
            border-color: #31a3fa;
            box-shadow: 0 0 0 3px rgba(49, 163, 250, 0.1);
        }

        .email-input:active {
            border-color: #31a3fa;
            box-shadow: 0 0 0 3px rgba(49, 163, 250, 0.1);
        }

        .email-suggestions {
            position: absolute;
            top: 100%;
            left: 0;
            right: 0;
            background: #FFFFFF;
            border: 1px solid #E6ECF4;
            border-radius: 8px;
            box-shadow: 0 8px 24px rgba(0, 0, 0, 0.15);
            z-index: 9998;
            max-height: 200px;
            overflow-y: auto;
            display: none;
            margin-top: 4px;
            animation: fadeInDown 0.2s ease-out;
        }

        .email-suggestion-item {
            padding: 12px 20px;
            cursor: pointer;
            transition: all 0.2s ease;
            font-size: 16px;
            color: #1A1A1A;
            border-bottom: 1px solid #F3F4F6;
            position: relative;
        }

        .email-suggestion-item:last-child {
            border-bottom: none;
        }

        .email-suggestion-item:hover {
            background-color: #F8FAFC;
            color: #31a3fa;
        }

        .email-suggestion-item.active {
            background-color: #EFF6FF;
            color: #31a3fa;
            font-weight: 500;
        }

        .email-suggestion-item .suggestion-label {
            font-size: 14px;
            color: #6B7280;
            margin-top: 2px;
        }

        .email-at {
            color: #6B7280;
            font-size: 16px;
            font-weight: 500;
            height: 45px;
            display: flex;
            align-items: center;
            flex-shrink: 0;
        }

        .email-domain-wrapper {
            position: relative;
            flex: 1;
            min-width: 0;
            height: 45px;
        }

        .email-domain-input {
            flex: 1;
            height: 45px;
            padding: 0 8px;
            padding-right: 24px;
            min-width: 0;
            overflow: hidden;
            text-overflow: ellipsis;
            white-space: nowrap;
            box-sizing: border-box;
            display: flex;
            align-items: center;
            transition: all 0.2s ease;
        }

        .email-domain-input:focus {
            border-color: #31a3fa;
            box-shadow: 0 0 0 3px rgba(49, 163, 250, 0.1);
        }

        .email-domain-input:hover {
            border-color: #31a3fa;
        }

        .email-domain-input:active {
            border-color: #31a3fa;
            box-shadow: 0 0 0 3px rgba(49, 163, 250, 0.1);
        }

        .email-domain-input.valid {
            border-color: #31a3fa;
        }

        .email-domain-input.valid:hover {
            border-color: #31a3fa;
        }

        .email-domain-input.valid:active {
            border-color: #31a3fa;
            box-shadow: 0 0 0 3px rgba(49, 163, 250, 0.1);
        }

        .email-domain-input.invalid {
            border-color: #EF4444;
        }

        .email-domain-input.invalid:hover {
            border-color: #EF4444;
        }

        .email-domain-input.invalid:active {
            border-color: #EF4444;
            box-shadow: 0 0 0 3px rgba(239, 68, 68, 0.1);
        }

        .dropdown-icon {
            position: absolute;
            right: 13px;
            top: 50%;
            transform: translateY(-50%);
            width: 14px;
            height: 14px;
            color: #6B7280;
            cursor: pointer;
            transition: transform 0.2s ease;
        }

        .dropdown-icon.active {
            transform: translateY(-50%) rotate(180deg);
        }

        .dropdown-menu {
            position: absolute;
            top: 100%;
            left: 0;
            right: 0;
            background: #FFFFFF;
            border: 1px solid #E6ECF4;
            border-radius: 8px;
            box-shadow: 0 8px 24px rgba(0, 0, 0, 0.15);
            z-index: 9999;
            max-height: 240px;
            overflow-y: auto;
            display: none;
            margin-top: 4px;
            animation: fadeInDown 0.2s ease-out;
        }

        @keyframes fadeInDown {
            from {
                opacity: 0;
                transform: translateY(-8px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .dropdown-menu.show {
            display: block;
        }

        .dropdown-item {
            padding: 12px 20px;
            cursor: pointer;
            transition: all 0.2s ease;
            font-size: 16px;
            color: #1A1A1A;
            border-bottom: 1px solid #F3F4F6;
            position: relative;
        }

        .dropdown-item:last-child {
            border-bottom: none;
        }

        .dropdown-item:hover {
            background-color: #F8FAFC;
            color: #31a3fa;
        }

        .dropdown-item:active {
            background-color: #EFF6FF;
            transform: scale(0.98);
        }

        .dropdown-item.active {
            background-color: #EFF6FF;
            color: #31a3fa;
            font-weight: 500;
        }

        .dropdown-item:first-child {
            border-radius: 8px 8px 0 0;
        }

        .dropdown-item:last-child {
            border-radius: 0 0 8px 8px;
        }

        .checkbox {
            display: flex;
            align-items: center;
            gap: 8px;
            cursor: pointer;
            margin: 20px 0;
            background: transparent;
            -webkit-tap-highlight-color: transparent;
        }

        .checkbox:active {
            background: transparent;
        }

        .checkbox input[type="checkbox"] {
            width: 18px;
            height: 18px;
            accent-color: #31a3fa;
            cursor: pointer;
            border: 2px solid #D1D5DB;
            border-radius: 4px;
            background: #FFFFFF;
            appearance: none;
            -webkit-appearance: none;
            -moz-appearance: none;
            position: relative;
        }

        .checkbox input[type="checkbox"]:checked {
            background: #31a3fa;
            border-color: #31a3fa;
        }

        .checkbox input[type="checkbox"]:checked::after {
            content: '';
            position: absolute;
            top: 50%;
            left: 50%;
            width: 4px;
            height: 8px;
            border: solid white;
            border-width: 0 2px 2px 0;
            transform: translate(-50%, -50%) rotate(45deg);
        }

        .checkbox input[type="checkbox"]:focus {
            outline: none;
        }

        .checkbox label {
            font-size: 14px;
            color: #1A1A1A;
            cursor: pointer;
        }

        .submit-button {
            width: 100%;
            height: 45px;
            padding: 8px 16px;
            background: #1A254F;
            color: #FFFFFF;
            border: none;
            border-radius: 8px;
            font-size: 16px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.2s ease;
            margin-bottom: 0;
            display: flex;
            align-items: center;
            justify-content: center;
            font-family: "Noto Sans KR", system-ui, sans-serif;
        }

        .submit-button:hover {
            background: #31a3fa;
            transform: translateY(-1px);
            box-shadow: 0 4px 12px rgba(49, 163, 250, 0.3);
        }

        .login-link {
            text-align: center;
            font-size: 16px;
            color: #6B7280;
        }

        .login-link a {
            color: #1A254F;
            text-decoration: none;
            font-weight: 600;
            transition: color 0.2s ease;
        }

        .login-link a:hover {
            color: #0068FE;
            text-decoration: underline;
        }

        /* 반응형 디자인 */
        @media (max-width: 480px) {
            .signup-container {
                padding: 0;
                min-height: 100vh;
                overflow-y: auto;
                justify-content: center;
            }
            
            .signup-content {
                padding: 20px 18px;
                max-width: 100%;
                width: calc(100% - 24px);
                height: 749px;
                overflow: visible;
                display: flex;
                flex-direction: column;
                justify-content: center;
                align-items: center;
            }
            
            .signup-title {
                font-size: 24px;
            }
            
            .signup-logo {
                height: 38px;
                width: auto;
                max-width: 100%;
            }
            
            .form-input {
                height: 45px;
                padding: 0 20px;
                font-size: 16px;
                box-sizing: border-box;
            }
            
            .company-select {
                width: 100% !important;
                padding-right: 40px;
            }
            
            .select-arrow {
                right: 12px;
                width: 14px;
                height: 14px;
            }
            
            .email-wrapper {
                flex-direction: row;
                gap: 8px;
                height: 45px;
            }
            
            .email-at {
                display: flex;
                height: 45px;
            }
            
            .email-input,
            .email-domain-input {
                height: 45px;
                white-space: normal;
                overflow: visible;
                text-overflow: initial;
            }
            
            .submit-button {
                height: 45px;
                font-size: 16px;
            }
        }

        @media (max-width: 360px) {
            .signup-container {
                padding: 0;
                min-height: 100vh;
                overflow-y: auto;
                justify-content: center;
            }
            
            .signup-content {
                padding: 20px 18px;
                width: calc(100% - 16px);
                height: 749px;
                overflow: visible;
                display: flex;
                flex-direction: column;
                justify-content: center;
                align-items: center;
            }
            
            .signup-title {
                font-size: 24px;
            }
            
            .signup-logo {
                height: 38px;
                width: auto;
                max-width: 100%;
            }
            
            .form-input {
                height: 45px;
                padding: 0 20px;
                font-size: 16px;
            }
            
            .company-select {
                width: 100% !important;
                padding-right: 35px;
            }
            
            .select-arrow {
                right: 10px;
                width: 12px;
                height: 12px;
            }
            
            .email-wrapper {
                gap: 8px;
                height: 45px;
            }
            
            .email-input,
            .email-domain-input {
                height: 45px;
            }
            
            .email-at {
                height: 45px;
            }
            
            .submit-button {
                height: 45px;
                font-size: 16px;
            }
        }

        /* 접근성 */
        @media (prefers-reduced-motion: reduce) {
            .submit-button,
            .form-input {
                transition: none;
            }
            
            .submit-button:hover {
                transform: none;
            }
        }

        /* 포커스 표시 */
        .form-input:focus-visible,
        .submit-button:focus-visible {
            outline: 2px solid var(--tag-blue);
            outline-offset: 2px;
        }

        .checkbox:focus-visible {
            outline: none;
        }
    </style>
</head>
<body>
    <div class="signup-container">
        <div class="signup-content">
            <div class="signup-header">
            <img src="https://postfiles.pstatic.net/MjAyNTA5MDlfMTY2/MDAxNzU3Mzg1MDM2NjE5.LY9NCqiU7KTydmgbxO9BJRmKTHwOQz60fD0gJQKoxGog.f-406ZRNkxt_9ChiJTCNhIbmQSvgAvDDn0mU_XlIxOgg.PNG/00_%EB%A1%9C%EA%B3%A0-%EC%84%B8%EB%A1%9C%EC%A1%B0%ED%95%A9.png?type=w966" 
                 alt="INOPNC 로고" 
                 class="signup-logo"
                 style="height: 38px; width: auto; object-fit: contain; display: block !important;"
                 onload="console.log('회원가입 로고 이미지 로드 성공'); this.style.display='block';"
                 onerror="this.src='data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMTAwIiBoZWlnaHQ9IjQwIiB2aWV3Qm94PSIwIDAgMTAwIDQwIiBmaWxsPSJub25lIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciPgo8cmVjdCB3aWR0aD0iMTAwIiBoZWlnaHQ9IjQwIiBmaWxsPSIjMUEyNTRGIi8+Cjx0ZXh0IHg9IjUwIiB5PSIyNSIgZm9udC1mYW1pbHk9IkFyaWFsLCBzYW5zLXNlcmlmIiBmb250LXNpemU9IjE0IiBmaWxsPSJ3aGl0ZSIgdGV4dC1hbmNob3I9Im1pZGRsZSI+SU5PUE5DPC90ZXh0Pgo8L3N2Zz4K'; console.log('회원가입 로고 이미지 로드 실패, SVG 대체 이미지로 변경');"
                 loading="eager">
                <h1 class="signup-title">회원가입</h1>
            </div>

            <form id="signupForm" class="signup-form">
                <div class="form-group">
                    <input 
                        type="text" 
                        id="name" 
                        class="form-input" 
                        placeholder="이름"
                        required
                        autocomplete="name"
                    >
                </div>

                <div class="form-group">
                    <div class="select-wrapper">
                        <select 
                            id="company" 
                            class="form-input company-select" 
                            required
                        >
                            <option value="">소속(회사명)을 선택하세요</option>
                            <option value="이노피앤씨본사">이노피앤씨본사</option>
                            <option value="이노피앤씨코킹">이노피앤씨코킹</option>
                            <option value="까뮤이엔씨">까뮤이엔씨</option>
                            <option value="아이에스동서">아이에스동서</option>
                        </select>
                        <div class="select-arrow">
                            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                <polyline points="6,9 12,15 18,9"></polyline>
                            </svg>
                        </div>
                    </div>
                </div>

                <div class="form-group">
                    <input 
                        type="text" 
                        id="position" 
                        class="form-input" 
                        placeholder="직함"
                        required
                        autocomplete="organization-title"
                    >
                </div>

                <div class="form-group">
                    <input 
                        type="tel" 
                        id="phone" 
                        class="form-input" 
                        placeholder="핸드폰 번호"
                        required
                        autocomplete="tel"
                        pattern="[0-9-+()\s]+"
                        maxlength="13"
                    >
                </div>

                <div class="form-group">
                    <div class="email-wrapper">
                        <div class="email-username-wrapper">
                            <input 
                                type="text" 
                                id="emailUsername" 
                                class="form-input email-input" 
                                placeholder="이메일"
                                required
                                autocomplete="username"
                                pattern="[a-zA-Z0-9._%+-]+"
                            >
                            <div class="email-suggestions" id="emailSuggestions">
                                <!-- 자동완성 항목들이 여기에 동적으로 추가됩니다 -->
                            </div>
                        </div>
                        <span class="email-at">@</span>
                        <div class="email-domain-wrapper">
                            <input 
                                type="text" 
                                id="emailDomain" 
                                class="form-input email-domain-input" 
                                placeholder="직접입력"
                                required
                                pattern="[a-zA-Z0-9.-]+\.[a-zA-Z]{2,}"
                            >
                            <svg class="dropdown-icon" id="dropdownIcon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                <polyline points="6,9 12,15 18,9"></polyline>
                            </svg>
                            <div class="dropdown-menu" id="dropdownMenu">
                                <div class="dropdown-item" data-domain="gmail.com">gmail.com</div>
                                <div class="dropdown-item" data-domain="naver.com">naver.com</div>
                                <div class="dropdown-item" data-domain="daum.net">daum.net</div>
                                <div class="dropdown-item" data-domain="hanmail.net">hanmail.net</div>
                                <div class="dropdown-item" data-domain="yahoo.com">yahoo.com</div>
                                <div class="dropdown-item" data-domain="hotmail.com">hotmail.com</div>
                                <div class="dropdown-item" data-domain="outlook.com">outlook.com</div>
                                <div class="dropdown-item" data-domain="nate.com">nate.com</div>
                                <div class="dropdown-item" data-domain="kakao.com">kakao.com</div>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="checkbox">
                    <input type="checkbox" id="agreeTerms" name="agreeTerms" required>
                    <label for="agreeTerms">이용약관 및 개인정보처리방침에 동의합니다</label>
                </div>

                <button type="submit" class="submit-button" id="submitButton">
                    승인요청
                </button>
            </form>

        </div>
    </div>

    <script>
        // 입력 양식 검증 함수들
        function validateName(name) {
            return /^[가-힣a-zA-Z\s]{2,20}$/.test(name);
        }

        function validatePhone(phone) {
            return /^01[0-9]-?[0-9]{3,4}-?[0-9]{4}$/.test(phone);
        }

        function validateEmailUsername(username) {
            return /^[a-zA-Z0-9._%+-]+$/.test(username);
        }

        function validateEmailDomain(domain) {
            return /^[a-zA-Z0-9.-]+\.[a-zA-Z]{2,}$/.test(domain);
        }

        // 핸드폰 번호 자동 포맷팅
        document.getElementById('phone').addEventListener('input', function(e) {
            let value = e.target.value.replace(/[^0-9]/g, '');
            if (value.length >= 11) {
                value = value.replace(/(\d{3})(\d{4})(\d{4})/, '$1-$2-$3');
            } else if (value.length >= 7) {
                value = value.replace(/(\d{3})(\d{4})/, '$1-$2');
            } else if (value.length >= 3) {
                value = value.replace(/(\d{3})/, '$1-');
            }
            e.target.value = value;
        });

        // 회원가입 폼 처리
        document.getElementById('signupForm').addEventListener('submit', function(e) {
            e.preventDefault();
            
            const name = document.getElementById('name').value.trim();
            const company = document.getElementById('company').value.trim();
            const position = document.getElementById('position').value.trim();
            const phone = document.getElementById('phone').value.trim();
            const emailUsername = document.getElementById('emailUsername').value.trim();
            const emailDomain = document.getElementById('emailDomain').value.trim();
            const agreeTerms = document.getElementById('agreeTerms').checked;
            const submitButton = document.getElementById('submitButton');
            
            // 입력 양식 검증
            if (!validateName(name)) {
                showNotification('이름은 2-20자의 한글 또는 영문으로 입력해주세요.', 'error');
                return;
            }
            
            if (!validatePhone(phone)) {
                showNotification('핸드폰 번호는 010-1234-5678 형식으로 입력해주세요.', 'error');
                return;
            }
            
            if (!validateEmailUsername(emailUsername)) {
                showNotification('이메일 아이디는 영문, 숫자, 특수문자(._%+-)만 사용 가능합니다.', 'error');
                return;
            }
            
            if (!validateEmailDomain(emailDomain)) {
                showNotification('이메일 도메인을 올바르게 입력해주세요.', 'error');
                return;
            }
            
            if (!agreeTerms) {
                showNotification('이용약관 및 개인정보처리방침에 동의 후 가입이 가능합니다.', 'error');
                return;
            }
            
            // 회사명 선택 확인
            if (company === '') {
                showNotification('소속(회사명)을 선택해주세요.', 'error');
                return;
            }
            
            // 로딩 상태 표시
            submitButton.textContent = '처리 중...';
            submitButton.disabled = true;
            
            // 실제 회원가입 로직 (여기서는 시뮬레이션)
            setTimeout(() => {
                const email = emailUsername + '@' + emailDomain;
                
                // 최근 사용한 이메일 저장
                saveRecentEmail(emailUsername);
                
                // 회원 정보를 로컬 스토리지에 저장 (승인 대기 상태)
                const userData = {
                    name: name,
                    company: company,
                    position: position,
                    phone: phone,
                    email: email,
                    signupTime: new Date().toISOString(),
                    status: 'pending' // 승인 대기 상태
                };
                
                localStorage.setItem('userName', name);
                localStorage.setItem('userCompany', company);
                localStorage.setItem('userPosition', position);
                localStorage.setItem('userPhone', phone);
                localStorage.setItem('userEmail', email);
                localStorage.setItem('userSignupTime', new Date().toISOString());
                localStorage.setItem('userStatus', 'pending');
                
                // 관리자에게 회원가입 신청 메일 발송
                sendSignupRequestEmail(userData);
                
                // 승인 대기 메시지
                showNotification('관리자 승인 후 이용가능합니다.', 'info');
                
                // 로그인 페이지로 이동
                setTimeout(() => {
                    window.location.href = 'login.html';
                }, 3000);
            }, 2000);
        });

        // 회원가입 신청 메일 발송
        function sendSignupRequestEmail(userData) {
            const emailData = {
                to: 'khy972@inopnc.com',
                subject: '[INOPNC] 회원가입 승인 요청',
                body: `
새로운 회원가입 신청이 접수되었습니다.

=== 회원 정보 ===
이름: ${userData.name}
소속(회사명): ${userData.company}
직함: ${userData.position}
핸드폰 번호: ${userData.phone}
이메일 주소: ${userData.email}

=== 신청 정보 ===
신청 시간: ${new Date(userData.signupTime).toLocaleString('ko-KR')}
상태: 승인 대기

관리자 콘솔에서 승인 처리를 진행해주세요.
승인 후 사용자에게 문자 알림이 발송됩니다.

이 알림은 시스템에서 자동으로 발송되었습니다.
                `.trim()
            };

            // 실제 구현에서는 서버 API를 통해 메일 발송
            // 여기서는 시뮬레이션으로 로컬 스토리지에 저장
            const emailLog = JSON.parse(localStorage.getItem('emailLog') || '[]');
            emailLog.push({
                ...emailData,
                timestamp: new Date().toISOString(),
                status: 'sent',
                type: 'signup_request'
            });
            localStorage.setItem('emailLog', JSON.stringify(emailLog));

            // 관리자 콘솔용 데이터 저장
            const adminData = JSON.parse(localStorage.getItem('adminSignupRequests') || '[]');
            adminData.push({
                ...userData,
                requestId: 'REQ_' + Date.now(),
                adminEmail: 'khy972@inopnc.com'
            });
            localStorage.setItem('adminSignupRequests', JSON.stringify(adminData));

            // 콘솔에 메일 내용 출력 (개발용)
            console.log('=== 회원가입 신청 메일 발송 ===');
            console.log('수신자:', emailData.to);
            console.log('제목:', emailData.subject);
            console.log('내용:', emailData.body);
            console.log('발송 시간:', new Date().toLocaleString('ko-KR'));
        }

        // 관리자 승인 처리 함수 (시뮬레이션)
        function approveUser(requestId) {
            const adminData = JSON.parse(localStorage.getItem('adminSignupRequests') || '[]');
            const userData = adminData.find(req => req.requestId === requestId);
            
            if (userData) {
                // 승인 상태로 변경
                userData.status = 'approved';
                userData.approvedTime = new Date().toISOString();
                localStorage.setItem('adminSignupRequests', JSON.stringify(adminData));
                
                // 사용자에게 승인 완료 알림 발송
                sendApprovalNotification(userData);
                
                console.log('사용자 승인 완료:', userData.name);
            }
        }

        // 승인 완료 알림 발송 (이메일/문자)
        function sendApprovalNotification(userData) {
            // 이메일 알림
            const emailData = {
                to: userData.email,
                subject: '[INOPNC] 회원가입 승인 완료',
                body: `
안녕하세요 ${userData.name}님,

INOPNC 회원가입이 승인되었습니다.

=== 승인 정보 ===
이름: ${userData.name}
소속: ${userData.company}
직함: ${userData.position}
승인 시간: ${new Date().toLocaleString('ko-KR')}

이제 INOPNC 서비스를 이용하실 수 있습니다.
로그인 후 서비스를 이용해주세요.

감사합니다.
INOPNC 관리자
                `.trim()
            };

            // 문자 알림 (핸드폰 번호로)
            const smsData = {
                to: userData.phone,
                message: `[INOPNC] ${userData.name}님, 회원가입이 승인되었습니다. 이제 서비스를 이용하실 수 있습니다.`
            };

            // 로그 저장
            const notificationLog = JSON.parse(localStorage.getItem('notificationLog') || '[]');
            notificationLog.push({
                type: 'approval',
                email: emailData,
                sms: smsData,
                timestamp: new Date().toISOString(),
                status: 'sent'
            });
            localStorage.setItem('notificationLog', JSON.stringify(notificationLog));

            console.log('=== 승인 완료 알림 발송 ===');
            console.log('이메일 수신자:', emailData.to);
            console.log('문자 수신자:', smsData.to);
            console.log('이메일 제목:', emailData.subject);
            console.log('문자 내용:', smsData.message);
        }

        // 개발용: 모든 승인 대기 사용자 승인 처리
        function approveAllPendingUsers() {
            const adminData = JSON.parse(localStorage.getItem('adminSignupRequests') || '[]');
            const pendingUsers = adminData.filter(req => req.status === 'pending');
            
            pendingUsers.forEach(user => {
                approveUser(user.requestId);
            });
            
            console.log(`${pendingUsers.length}명의 사용자가 승인되었습니다.`);
        }

        // 개발용: 승인 처리 버튼 (실제 구현에서는 관리자 콘솔에서 처리)
        if (window.location.search.includes('admin=true')) {
            const adminButton = document.createElement('button');
            adminButton.textContent = '모든 대기 사용자 승인';
            adminButton.style.cssText = `
                position: fixed;
                top: 20px;
                left: 20px;
                background: #1A254F;
                color: white;
                border: none;
                padding: 10px 20px;
                border-radius: 8px;
                cursor: pointer;
                z-index: 10000;
            `;
            adminButton.onclick = approveAllPendingUsers;
            document.body.appendChild(adminButton);
        }

        // 이메일 도메인 드롭다운 기능
        const dropdownIcon = document.getElementById('dropdownIcon');
        const dropdownMenu = document.getElementById('dropdownMenu');
        const emailDomainInput = document.getElementById('emailDomain');
        
        // 이메일 사용자명 자동완성 기능
        const emailUsernameInput = document.getElementById('emailUsername');
        const emailSuggestions = document.getElementById('emailSuggestions');

        // 일반적인 이메일 도메인 목록
        const commonDomains = [
            'gmail.com', 'naver.com', 'daum.net', 'hanmail.net', 
            'yahoo.com', 'hotmail.com', 'outlook.com', 'nate.com', 
            'kakao.com', 'icloud.com', 'live.com', 'msn.com'
        ];

        // 드롭다운 토글
        dropdownIcon.addEventListener('click', function(e) {
            e.preventDefault();
            e.stopPropagation();
            toggleDropdown();
        });

        // 드롭다운 메뉴 항목 클릭
        dropdownMenu.addEventListener('click', function(e) {
            if (e.target.classList.contains('dropdown-item')) {
                const domain = e.target.getAttribute('data-domain');
                emailDomainInput.value = domain;
                validateEmailDomain(domain);
                closeDropdown();
            }
        });

        // 입력 필드 포커스 시 드롭다운 열기
        emailDomainInput.addEventListener('focus', function() {
            openDropdown();
        });

        // 실시간 입력 검증 및 자동완성
        emailDomainInput.addEventListener('input', function(e) {
            const value = e.target.value.toLowerCase();
            validateEmailDomain(value);
            filterDropdownItems(value);
        });

        // 입력 필드에서 포커스가 나갈 때 검증
        emailDomainInput.addEventListener('blur', function(e) {
            setTimeout(() => {
                const value = e.target.value.trim();
                if (value) {
                    validateEmailDomain(value);
                }
            }, 150);
        });

        // 이메일 사용자명 자동완성 기능
        emailUsernameInput.addEventListener('input', function(e) {
            const value = e.target.value.trim();
            if (value.length > 0) {
                showEmailSuggestions(value);
            } else {
                hideEmailSuggestions();
            }
        });

        emailUsernameInput.addEventListener('focus', function(e) {
            const value = e.target.value.trim();
            if (value.length > 0) {
                showEmailSuggestions(value);
            }
        });

        emailUsernameInput.addEventListener('blur', function(e) {
            setTimeout(() => {
                hideEmailSuggestions();
            }, 150);
        });

        // 이미지 로딩 확인 및 디버깅
        function checkSignupImageLoad() {
            const logo = document.querySelector('.signup-logo');
            if (logo) {
                console.log('회원가입 로고 요소 찾음:', logo);
                console.log('이미지 src:', logo.src);
                console.log('이미지 완료 상태:', logo.complete);
                console.log('이미지 자연 크기:', logo.naturalWidth, 'x', logo.naturalHeight);
                
                if (logo.complete && logo.naturalHeight !== 0) {
                    console.log('회원가입 이미지가 이미 로드됨');
                    logo.style.display = 'block';
                } else {
                    console.log('회원가입 이미지 로딩 중...');
                    // 이미지 재로딩 시도
                    setTimeout(() => {
                        if (!logo.complete || logo.naturalHeight === 0) {
                            console.log('이미지 재로딩 시도');
                            const originalSrc = logo.src.split('&t=')[0];
                            logo.src = originalSrc + '&t=' + Date.now();
                        }
                    }, 2000);
                }
            } else {
                console.log('회원가입 로고 요소를 찾을 수 없음');
            }
        }
        
        function forceImageReload() {
            const logo = document.querySelector('.signup-logo');
            if (logo) {
                const baseUrl = 'images/logo_n.png';
                logo.src = baseUrl + '?t=' + Date.now();
                console.log('강제 이미지 재로딩:', logo.src);
            }
        }

        // 페이지 로드 후 이미지 상태 확인
        document.addEventListener('DOMContentLoaded', function() {
            setTimeout(checkSignupImageLoad, 1000);
            
            // 이미지 로딩 실패 시 재시도
            const logo = document.querySelector('.signup-logo');
            if (logo) {
                logo.addEventListener('error', function() {
                    console.log('이미지 로딩 실패, 재시도 중...');
                    setTimeout(forceImageReload, 1000);
                });
                
                logo.addEventListener('load', function() {
                    console.log('이미지 로딩 성공 확인됨');
                    this.style.display = 'block';
                });
            }
        });

        // 외부 클릭 시 드롭다운 닫기
        document.addEventListener('click', function(e) {
            if (!e.target.closest('.email-domain-wrapper')) {
                closeDropdown();
            }
            if (!e.target.closest('.email-username-wrapper')) {
                hideEmailSuggestions();
            }
        });

        // 드롭다운 열기
        function openDropdown() {
            dropdownMenu.classList.add('show');
            dropdownIcon.classList.add('active');
        }

        // 드롭다운 닫기
        function closeDropdown() {
            dropdownMenu.classList.remove('show');
            dropdownIcon.classList.remove('active');
        }

        // 이메일 도메인 실시간 검증
        function validateEmailDomain(domain) {
            const emailDomainInput = document.getElementById('emailDomain');
            const emailRegex = /^[a-zA-Z0-9.-]+\.[a-zA-Z]{2,}$/;
            
            if (domain === '') {
                emailDomainInput.classList.remove('valid', 'invalid');
                return false;
            }
            
            if (emailRegex.test(domain)) {
                emailDomainInput.classList.remove('invalid');
                emailDomainInput.classList.add('valid');
                return true;
            } else {
                emailDomainInput.classList.remove('valid');
                emailDomainInput.classList.add('invalid');
                return false;
            }
        }

        // 드롭다운 아이템 필터링
        function filterDropdownItems(searchTerm) {
            const dropdownItems = dropdownMenu.querySelectorAll('.dropdown-item');
            let hasVisibleItems = false;
            
            dropdownItems.forEach(item => {
                const domain = item.getAttribute('data-domain');
                if (domain.toLowerCase().includes(searchTerm.toLowerCase())) {
                    item.style.display = 'block';
                    hasVisibleItems = true;
                } else {
                    item.style.display = 'none';
                }
            });
            
            // 검색어가 있으면 드롭다운 열기
            if (searchTerm && hasVisibleItems) {
                openDropdown();
            } else if (!searchTerm) {
                // 검색어가 없으면 모든 아이템 표시
                dropdownItems.forEach(item => {
                    item.style.display = 'block';
                });
            }
        }

        // 키보드 네비게이션
        emailDomainInput.addEventListener('keydown', function(e) {
            const dropdownItems = dropdownMenu.querySelectorAll('.dropdown-item:not([style*="display: none"])');
            const activeItem = dropdownMenu.querySelector('.dropdown-item.active');
            let currentIndex = -1;
            
            if (activeItem) {
                currentIndex = Array.from(dropdownItems).indexOf(activeItem);
            }
            
            switch(e.key) {
                case 'ArrowDown':
                    e.preventDefault();
                    if (currentIndex < dropdownItems.length - 1) {
                        if (activeItem) activeItem.classList.remove('active');
                        dropdownItems[currentIndex + 1].classList.add('active');
                    }
                    break;
                case 'ArrowUp':
                    e.preventDefault();
                    if (currentIndex > 0) {
                        if (activeItem) activeItem.classList.remove('active');
                        dropdownItems[currentIndex - 1].classList.add('active');
                    }
                    break;
                case 'Enter':
                    e.preventDefault();
                    if (activeItem) {
                        const domain = activeItem.getAttribute('data-domain');
                        emailDomainInput.value = domain;
                        validateEmailDomain(domain);
                        closeDropdown();
                    }
                    break;
                case 'Escape':
                    closeDropdown();
                    break;
            }
        });

        // 드롭다운 토글
        function toggleDropdown() {
            if (dropdownMenu.classList.contains('show')) {
                closeDropdown();
            } else {
                openDropdown();
            }
        }

        // 이메일 사용자명 자동완성 관련 함수들
        function getRecentEmails() {
            const recentEmails = localStorage.getItem('recentEmails');
            return recentEmails ? JSON.parse(recentEmails) : [];
        }

        function saveRecentEmail(email) {
            let recentEmails = getRecentEmails();
            // 중복 제거
            recentEmails = recentEmails.filter(e => e !== email);
            // 맨 앞에 추가
            recentEmails.unshift(email);
            // 최대 10개까지만 저장
            recentEmails = recentEmails.slice(0, 10);
            localStorage.setItem('recentEmails', JSON.stringify(recentEmails));
        }

        function showEmailSuggestions(searchTerm) {
            const recentEmails = getRecentEmails();
            const filteredEmails = recentEmails.filter(email => 
                email.toLowerCase().includes(searchTerm.toLowerCase())
            );

            if (filteredEmails.length === 0) {
                hideEmailSuggestions();
                return;
            }

            emailSuggestions.innerHTML = '';
            filteredEmails.forEach((email, index) => {
                const item = document.createElement('div');
                item.className = 'email-suggestion-item';
                item.innerHTML = `
                    <div>${email}</div>
                    <div class="suggestion-label">최근 사용한 이메일</div>
                `;
                
                item.addEventListener('click', function() {
                    emailUsernameInput.value = email;
                    hideEmailSuggestions();
                    emailUsernameInput.focus();
                });

                emailSuggestions.appendChild(item);
            });

            emailSuggestions.style.display = 'block';
        }

        function hideEmailSuggestions() {
            emailSuggestions.style.display = 'none';
        }

        // 이메일 사용자명 키보드 네비게이션
        emailUsernameInput.addEventListener('keydown', function(e) {
            const suggestionItems = emailSuggestions.querySelectorAll('.email-suggestion-item');
            const activeItem = emailSuggestions.querySelector('.email-suggestion-item.active');
            let currentIndex = -1;
            
            if (activeItem) {
                currentIndex = Array.from(suggestionItems).indexOf(activeItem);
            }
            
            switch(e.key) {
                case 'ArrowDown':
                    e.preventDefault();
                    if (suggestionItems.length > 0) {
                        if (currentIndex < suggestionItems.length - 1) {
                            if (activeItem) activeItem.classList.remove('active');
                            suggestionItems[currentIndex + 1].classList.add('active');
                        }
                    }
                    break;
                case 'ArrowUp':
                    e.preventDefault();
                    if (currentIndex > 0) {
                        if (activeItem) activeItem.classList.remove('active');
                        suggestionItems[currentIndex - 1].classList.add('active');
                    }
                    break;
                case 'Enter':
                    e.preventDefault();
                    if (activeItem) {
                        const email = activeItem.querySelector('div').textContent;
                        emailUsernameInput.value = email;
                        hideEmailSuggestions();
                    }
                    break;
                case 'Escape':
                    hideEmailSuggestions();
                    break;
            }
        });

        // 알림 표시
        function showNotification(message, type = 'info') {
            const notification = document.createElement('div');
            notification.className = `notification notification-${type}`;
            notification.style.cssText = `
                position: fixed;
                top: 20px;
                left: 50%;
                transform: translateX(-50%);
                background: var(--card);
                color: var(--ink);
                padding: 16px 24px;
                border-radius: 12px;
                box-shadow: 0 8px 32px rgba(0, 0, 0, 0.1);
                border: 1px solid var(--line);
                z-index: 10000;
                animation: slideDown 0.3s ease-out;
                max-width: 90vw;
                text-align: center;
                font-size: 16px;
            `;
            
            notification.textContent = message;
            document.body.appendChild(notification);
            
            // 3초 후 자동 제거
            setTimeout(() => {
                notification.style.animation = 'slideUp 0.3s ease-out';
                setTimeout(() => {
                    document.body.removeChild(notification);
                }, 300);
            }, 3000);
        }

        // 애니메이션 CSS 추가
        const style = document.createElement('style');
        style.textContent = `
            @keyframes slideDown {
                from {
                    opacity: 0;
                    transform: translateX(-50%) translateY(-20px);
                }
                to {
                    opacity: 1;
                    transform: translateX(-50%) translateY(0);
                }
            }
            
            @keyframes slideUp {
                from {
                    opacity: 1;
                    transform: translateX(-50%) translateY(0);
                }
                to {
                    opacity: 0;
                    transform: translateX(-50%) translateY(-20px);
                }
            }
        `;
        document.head.appendChild(style);

        // 키보드 접근성
        document.addEventListener('keydown', function(e) {
            if (e.key === 'Enter' && e.target.classList.contains('form-input')) {
                const form = document.getElementById('signupForm');
                const inputs = Array.from(form.querySelectorAll('.form-input'));
                const currentIndex = inputs.indexOf(e.target);
                
                if (currentIndex < inputs.length - 1) {
                    inputs[currentIndex + 1].focus();
                } else {
                    form.dispatchEvent(new Event('submit'));
                }
            }
        });
    </script>
</body>
</html>
